"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Resource Terminator"
package     = tosca
version     = "1.0"
description = """
This document defines a function that terminates another resource and then terminates it self.  Resources that spawn from 
a declarative approach cannot die right away so this resource will get spawned and wait until the wait time expires and 
will then terminate the resource and itself.
"""
authors     = [ "Matt Becker (mbecker@ciena.com)" ]

imports {

}

resourceTypes { 
    ResourceTerminator {
        derivedFrom = tosca.resourceTypes.Root
        title = Resource Terminator
        description = """
       
        """

        properties {
        
            resource_id {
                title = "Resource ID"
                description = "Resource ID"
                type = string
                updatable = false
                optional = false 
            }
            
            wait_time {
                title = "Wait Time"
                description = "Wait Time"
                type = integer
                default = 5
                updatable = true
            }

        }
    }
}

serviceTemplates {

    ResourceTerminator {
        title = Resource Terminator
        implements = tosca.resourceTypes.ResourceTerminator
        description = ""
        plans {
        
            activate {
                type = remote
                language = python
                path = "scripts.networkservice.resourceterminator.Activate"
            }

            terminate {
                type = remote
                language = python
                path = "scripts.networkservice.resourceterminator.Terminate"
            }
            
        }
        
    }
}