"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Network Service"
package     = charter
version     = "1.0"
description = """
This document defines the Network Service Update model.  This is the top level service 
construct that will be used for communicating with north-bound OSS, WebPortals, 
etc... for the validation of an update request to network service.
"""
authors     = [ "Sahil Sidhar (ssidhar@ciena.com)" ]

imports {

}

resourceTypes { 
    BandwidthUpdate {
        derivedFrom = [ tosca.resourceTypes.NetworkService, charter.resourceTypes.BaseResource ]
        title = Bandwidth Update
        description = """
        - Resource Type to implement Bandwidth update of a network service. 
        """

        properties {
            circuit_details_resource_id {
                type = string
                title = Circuit Details Resource Id
                description = Circuit Details Resource Id
            }
            bandwidthValue {
                title = optional bandwidth value
                description = """optional parameter to update bandwidth
                              """
                type = string
                optional = true
            }
            devices_to_be_updated {
                title = "devices to be updated"
                description = "dictionary to hold Host Name values of devices that need to be updated"
                type = object
                config = true
                optional = true
                items.type = object
            }
            operation {
                title = "Operation from which this CircuitDetailsCollector was invoked"
                description = """
                This property influences the CircuitDetailsCollector's behavior when choosing which
                nodes to configure.
                """
                optional = true
                updatable = false
                type = string
                default = "NETWORK_SERVICE_ACTIVATION"
                enum = [
                    "NETWORK_SERVICE_UPDATE",
                    "NETWORK_SERVICE_DELETION",
                    "NETWORK_SERVICE_ACTIVATION",
                    "CPE_ACTIVATION",
                    "SERVICE_MAPPER"
                ]
            }
        }
    }
}

serviceTemplates {

    BandwidthUpdate {
        title = Bandwidth Update
        description = "Bandwidth Update"
        implements = charter.resourceTypes.BandwidthUpdate

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.networkserviceupdate.bandwidth_update.Activate"
            }

        }
    }
}
