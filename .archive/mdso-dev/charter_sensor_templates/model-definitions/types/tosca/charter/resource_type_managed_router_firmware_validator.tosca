"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Managed Router Firmware Validator"
package     = charter
version     = "1.0"
description = """
This document defines the Managed Router Firmware Validator.  This will check
if a Managed Router is running an approved firmware version.
"""

authors     = []

imports {

}

resourceTypes {
    ManagedRouterFirmwareValidator {
        derivedFrom = tosca.resourceTypes.Root
        title = Managed Router Firmware Validator
        description = """
        - Extended from charter.resourceTypes.BaseResource
        - Firmware validator for MRS
        """
    
        properties {
            ipAddress {
                title = "ip address"
                description = "ip address of the device"
                type = string
                optional = false
            },
            firmwareVersion {
                title = "firmware version"
                description = "approved firmware version"
                type = string
                optional = false
            },
            approved {
                title = "Indicator on validity of running firmware version"
                description = "Indicator on validity of running firmware version"
                config = false
                type = boolean
                optional = true
                default = false
            }
        }
    }
}

serviceTemplates {
    ManagedRouterFirmwareValidator {
        title = Managed Router Firmware Validator
        description = "Managed Router Firmware Validator"
        implements = charter.resourceTypes.ManagedRouterFirmwareValidator

        plans {
            activate {
                type = remote
                language = python
                path = "scripts.managedServicesActivator.managedRouterFirmwareValidator.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.managedServicesActivator.managedRouterFirmwareValidator.Terminate"
            }
        }
    }
}