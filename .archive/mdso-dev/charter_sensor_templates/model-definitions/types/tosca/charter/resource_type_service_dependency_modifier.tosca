"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Service Dependency Modifier"
package     = charter
version     = "1.0"
description = """
This document defines the the Service Dependency Modifier that will look after a service is built
it will determine if any other dependency needs to be updated.
"""
authors     = [ "Matt Becker (mbecker@ciena.com)" ]

imports {

}

resourceTypes { 
    ServiceDependencyModifier {
        derivedFrom = charter.resourceTypes.BaseResource
        title = Service Dependency Modifier
        description = """
        """

        properties {
        
            circuit_details_id {
                title = "Circuit Details ID"
                description = "ID for the circuit details created from the Granite system"
                type = string
                optional = false
                updatable = false
            }
            
            action {
                title = "Action"
                description = "Action"
                type = string
                optional = true
                updatable = false
                default = "ACTIVATE"
                enum = [
                    "ACTIVATE",
                    "TERMINATE"
                ]
            }
            operation {
                title = "Operation from which this CircuitDetailsCollector was invoked"
                description = """
                This property influences the CircuitDetailsCollector's behavior when choosing which
                nodes to configure.
                """
                optional = true
                updatable = false
                type = string
                default = "NETWORK_SERVICE_ACTIVATION"
                enum = [
                    "NETWORK_SERVICE_UPDATE",
                    "NETWORK_SERVICE_DELETION",
                    "NETWORK_SERVICE_ACTIVATION",
                    "CPE_ACTIVATION",
                    "SERVICE_MAPPER"
                ]
            }

        }

        requirements {
    
        }
    
        capabilities {
    
        }

    }
}

serviceTemplates {

    ServiceDependencyModifier {
        title = Service Dependency Modifier
        description = "Service Dependency Modifier"
        implements = charter.resourceTypes.ServiceDependencyModifier
        
        plans {

            activate {
                type = remote
                language = python
                path = "scripts.networkservice.servicedependencymodifier.Activate"
            }
        }
    }
}