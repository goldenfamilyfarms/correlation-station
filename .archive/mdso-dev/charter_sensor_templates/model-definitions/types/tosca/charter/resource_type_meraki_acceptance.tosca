"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Meraki Post-activation"
package     = charter
version     = "2.0"
description = """
This document holds the fields necessary to perform post activation checks on an instance of MNE.
"""
authors = [ "George Strauch (george.strauch@charter.com)" ]

imports {
}

resourceTypes {
    merakiAcceptance {
        title = MNE Post-activation Acceptance
        description = """ Post-activation audit check of MNE instance """
        derivedFrom = tosca.resourceTypes.Root
        title = Meraki Acceptance
        properties {
            report {
                title = "Report"
                description = "List of detected errors"
                type = array
                items.type = string
                optional = true
            }
            remediated_fields {
                title = "Remediated Errors"
                description = "List of Errors remediated by Automation"
                type = array
                items.type  = string
                optional = true
            }
            expected_data {
                title = "Sales Force Data"
                description = "quantity, address product_family, cid and name"
                type = object
                items.type = string
                optional = false
            }
        }
    }
}

serviceTemplates {
    merakiAcceptance {
        title = MNE Post-activation
        description = """ Post-activation audit check of MNE instance """
        implements = charter.resourceTypes.merakiAcceptance

        plans {
            activate{
                type = remote
                language = python
                path = "scripts.managedServicesActivator.merakiServices.MerakiAcceptance.Activate"
            }

            terminate{
                type = remote
                language = python
                path = "scripts.managedServicesActivator.merakiServices.MerakiAcceptance.Terminate"
            }

        }
    }
}

