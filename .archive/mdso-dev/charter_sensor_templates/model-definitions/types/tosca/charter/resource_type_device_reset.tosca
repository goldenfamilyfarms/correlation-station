"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Device Reset"
package     = charter
version     = "1.0"
description = """
This document defines Device Reset. This is the top level service
construct that will be used for the resetting of dev test devices for testing, aka pin setter...
"""
authors     = [ "Michael Smith (michaelx.smith@charter.com)", "Christopher Schafer (christopher.schafer@charter.com)", "Allison Patino (allison.patino@charter.com)"]

imports {

}

resourceTypes {
    DeviceReset {
        derivedFrom = charter.resourceTypes.BaseResource
        title = Device Reset
        description = """
        - Extended from charter.resourceTypes.BaseResource
        - The main entry point for Charter's systems for creating a Service Mapper resource.
        - This Resource Definition only requires the Charter Circuit ID 
        - For service types like ELINE, ELAN, FIA, etc.
        """

        properties {
            circuit_id {
                title = "Circuit ID"
                description = "Circuit ID"
                type = string
                optional = false
                updatable = false
            }
            device_properties {
                title = "Device Properties"
                description = "Device Management IP, MediaType and placeholder for future properties to be mapped"
                type = object
                config = true
                optional = true
                items.type = object
            }
            device_tid {
                title = "Device tid"
                description = "Device Tid example (AUSLTXABVZW)"
                type = string
                updatable = true
                optional = true
            }
            service_type {
                title = "Service Type"
                description = "Network Service Type (FIA, ELINE, ELAN, etc)"
                type = string
                updatable = true
                optional = true
            }
            circuit_details {
                title = "Circuit Details"
                description = "circuit details"
                type = object
                config = false
                optional = true
            }
            circuit_details_id {
                title = "Circuit Details ID"
                description = "circuit details id"
                type = string
                config = false
                optional = true
                updatable = true
            }
            device_reset_progress {
                title = "Device Reset Progress"
                description = "Progress along the way"
                type = object
                config = false
                optional = true
                items.type = object
            }
        }
    }
}

serviceTemplates {
    DeviceReset {
        title = Device Reset
        description = "Device Reset"
        implements = charter.resourceTypes.DeviceReset

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.deviceReset.deviceReset.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.deviceReset.deviceReset.Terminate"
            }
        }
    }
}
