"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "MNE Data"
package     = charter
version     = "1.0"
description = """

etc...
"""
authors     = [ "Paul Kim (paul.kim@charter.com)" ]

imports {
    root = tosca.resourceTypes.Root
}

resourceTypes { 
    MNEData {
        derivedFrom = [ root ]
        title = MNE Product Data
        description = """
        This will contain all Data (SNMP strings, default creds, etc) to be used by MNE product suite
        """
        properties {
            apiKey {
                title = "API key"
                description = "Meraki api key 1"
                type = string
                optional = false
                obfuscate = true
                updatable = true
            }
            apiKey2 {
                title = "API key"
                description = "Meraki api key 2"
                type = string
                optional = false
                obfuscate = true
                updatable = true
            }
            serial_db_auth_username {
                title = "serial database username"
                description = "serial database username"
                type = string
                optional = false
                obfuscate = true
                updatable = true
            }
            serial_db_auth_passwd {
                title = "serial database password"
                description = "serial database password"
                type = string
                optional = false
                obfuscate = true
                updatable = true
            }
            AccessPoints {
                title = "Meraki AP Data"
                description = "MR Appliances"
                type = object
                optional = true
                updatable = true
                properties {
                    PSK {
                        title = "Pre-shared key"
                        description = "Default psk for SSIDs"
                        type = string
                        optional = false
                        obfuscate = true
                        updatable = true
                    }
                }
            }
            SecurityAppliances {
                title = "Security Appliances Data"
                description = "MX Security Appliances"
                type = object
                optional = true
                updatable = true
                properties {
                    InventoryOrgId {
                        title = "Inventory Org Id"
                        description = "Organization used to hold an inventory of available licenses"
                        type = string
                        optional = false
                        obfuscate = false
                        updatable = true
                    }
                    TemplateOrgIds {
                        title = "Template Org IDs"
                        description = "list of organizations used to clone new organizations"
                        type = array
                        optional = false
                        obfuscate = false
                        updatable = true
                    }
                }
            }
            Configurations {
                title = "Config Data"
                description = "miscellaneous configuration info"
                type = object
                optional = true
                updatable = true
            }
        }
    }
}


serviceTemplates {
  MNEData {
    title = "MNEData Data Template"
    description = "Default implementation"
    implements = charter.resourceTypes.MNEData
        plans {
            activate {
                type = remote
                language = python
                path = "scripts.common_plan.SingletonActivate"
                }
            update {
                type = remote
                language = python
                path = "scripts.common_plan.SingletonActivate"
                }
        }
    }
}
