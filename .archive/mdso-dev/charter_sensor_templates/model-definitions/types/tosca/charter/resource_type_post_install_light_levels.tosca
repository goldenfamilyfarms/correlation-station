"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Post Install Light Levels"
package     = charter
version     = "1.0"
description = """
This document defines the Post Install Light Levels tool. 
This tool will be used to obtain light levels on the cpe-facing port at the hub and uplink of auto-activated CPEs.
"""
authors = [ "David Edelson (David.Edelson@charter.com)"]

imports {

}

resourceTypes {
    postInstallLightLevels {
        derivedFrom = tosca.resourceTypes.Root
        title = Post Install Light Levels
        description = """
        - This document defines a resource that intakes the TID of a device and specified port, 
        - then returns the light levels observed on the port..
        - This Resource Definition requires the following:
            TID of target device
            Port
        """

        properties {
            device_tid {
                title = "TID of target device"
                description = "TID of Device to have levels checked"
                type = string
                optional = false
                updatable = false
            }
            device_id {
                title = "Network Function ID of target device"
                description = "Network Function ID of Device - NF ID better than TID if we have it"
                type = string
                optional = true
                updatable = false
            }
            port {
                title = "Port on target device"
                description = "Port on device to have levels checked"
                type = string
                optional = true
                updatable = false
            }
            pill_status {
                config = false
                title = "CPE Light Levels Status"
                description = "Progress of CPE Light Levels status"
                type = string
    	        optional = true
		    }
            pill_details {
                title = "PILL Details"
                description = "dictionary to hold SFP and/or Threshold Details"
                type = object
                config = false
                optional = true
                items.type = object
            }
            pill_error {
                config = false
                title = "CPE Light Levels Error Status"
                description = "Error status of CPE Light Levels"
                type = string
    	        optional = true        
	    	}
            pill_error_code {
                config = false
                title = "CPE Light Levels Error Code"
                description = "CPE Light Levels Updater Error Code"
                type = string
    	        optional = true
	    	}
		}
    }
}

serviceTemplates {
    postInstallLightLevels {
        title = Post Install Light Levels
        description = "Post Install Light Levels tool"
        implements = charter.resourceTypes.postInstallLightLevels

        plans {
            activate {
                type = remote
                language = python
                path = "scripts.autoActivation.postInstallLightLevels.postInstallLightLevels.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.autoActivation.postInstallLightLevels.postInstallLightLevels.Terminate"
            }
        }
    }
}
