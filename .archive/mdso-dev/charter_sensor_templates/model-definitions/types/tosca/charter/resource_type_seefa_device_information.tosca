"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "SEEFA Device Information"
package     = charter
version     = "1.0"
description = """
This document defines SEEFA Device Information. This is the top level service
construct that will be used for communicating with north-bound OSS, WebPortals,
etc...
"""
authors     = [ "Allison Patino (allison.patino@charter.com)", "Robert Saunders (robert.j.saunders@charter.com)"]

imports {

}

resourceTypes {
    seefaDeviceInformation {
        derivedFrom = tosca.resourceTypes.Root
        title = SEEFA Device Information
        description = """
        - Extended from tosca.resourceTypes.Root
        - The main entry point for Charter's systems for creating a SEEFA Device Information resource.
        - This Resource Definition requires the command file name and any variables (parameters) within the command, host id, and device vendor
        - For Juniper, Adva, RAD, and Cisco devices
        """

        properties {
            host_id {
                title = host id
                description = fqdn or ip of device
                type = string
                optional = false
            }
            vendor {
                title = device vendor
                description = device vendor
                type = string
                optional = false
            }
            model {
                title = device model
                description = device model
                type = string
                optional = true
            }
            command {
                    title = command
                    description = command file to execute on the machine
                    type = string
                    optional = false
                }
            parameters {
                title = parameters
                description = any parameters required to render the command appropriately
                type = object
                optional = true
                default = {}
            }
            result {
                title = device data
                description = device response to command issued
                type = object
                output = false
                config = false
                updatable = true
                default = {}
            }       
        }
    }
}

serviceTemplates {
    seefaDeviceInformation {
        title = SEEFA Device Information
        description = device information required by SEEFA workstreams
        implements = charter.resourceTypes.seefaDeviceInformation

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.seefa.device_information.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.seefa.device_information.Terminate"
            }
        }
    }
}
