"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "SEEFA TACACS Remediation"
package     = charter
version     = "1.0"
description = """
This document defines SEEFA TACACS Remediation. This is a remediation service to fix TACAS and local user accounts on CPE devices.
"""
authors     = [ "Robert Saunders (robert.j.saunders@charter.com)"]

imports {

}

resourceTypes {
    seefaTACACSRemediation {
        derivedFrom = tosca.resourceTypes.Root
        title = SEEFA TACACS Remediation
        description = """
        - Extended from tosca.resourceTypes.Root
        - The main entry point for Charter's systems for creating a SEEFA ISE Checker resource.
        - This Resource Definition requires vendor, fdqn, region, state
        - For RAD, and ADVA devices
        """

        properties {
            fqdn {
                title =fqdn
                description = fqdn of device
                type = string
                optional = false
            }
            vendor {
                title = device vendor
                description = device vendor
                type = string
                optional = false
            }
            region {
                title = device region 
                description = region device is located 
                type = string
                optional = false
            }
            state {
                title = device state 
                description = state device is located 
                type = string
                optional = false
            }
            local_creds {
                title = Local creds required
                description = bool to determine if local creds are required
                type = boolean
                optional = false
                default = true
            }
            status {
                title = device data
                description = device response to ise chek
                type = object
                output = false
                config = false
                updatable = true
                default = {}
            }       
        }
    }
}

serviceTemplates {
    seefaTACACSRemediation {
        title = SEEFA TACACS Remediation
        description = TACACS Remediation required by SEEFA workstreams
        implements = charter.resourceTypes.seefaTACACSRemediation

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.seefa.tacacs_remediation.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.seefa.tacacs_remediation.Terminate"
            }
        }
    }
}
