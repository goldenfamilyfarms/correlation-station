"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Network Service"
package     = charter
version     = "1.0"
description = """
This document defines the Network Service Update model.  This is the top level service 
construct that will be used for communicating with north-bound OSS, WebPortals, 
etc... for the update of network service.
"""
authors     = [ "Sahil Sidhar (ssidhar@ciena.com)" ]

imports {

}

resourceTypes { 
    NetworkServiceUpdate {
        derivedFrom = [ tosca.resourceTypes.NetworkService, charter.resourceTypes.BaseResource ]
        title = Network Service Update
        description = """
        - Extended from charter.resourceTypes.NetworkService  
        - The main entry point for Charter's systems (SENSE-CLI or Web Interface to call) for all CRUDL 
        commands for a service (or service inventory) 
        - This Resource Definition only requires the Charter Circuit ID to create (POST), 
        update (PUT/PATCH) and remove (DELETE) 
        - Contains overall state of the network service. 
        - For service types like ELINE, ELAN, ETREE, etc. 
        - Contains state and other information about each site in the network service. 
        - Provides custom operations such as activateSite, suspend, resume. 
        """

        properties {

            network_service_status {
                title = "Network Service Status"
                description = "Status of network service translated from resource name"
                type = string
                config = false
                optional = true
            }

            network_service_error {
                title = "Network Service error"
                description = "Categorized error message of earliest failure in tracelog"
                type = string
                config = false
                optional = true
            }

            devices_to_be_updated {
                title = "devices to be updated"
                description = "dictionary to hold Host Name values of devices that need to be updated"
                type = object
                config = true
                optional = true
                items.type = object
            }

            circuit_details_id {
                type = string
                title = Circuit Details Resource Id
                description = Circuit Details Resource Id
                optional = true
            }

            bandwidth {
                title = bandwidth
                description = """indicates if its a bandwidth update
                              """
                type = boolean
                optional = true
                default = false
            }

            bandwidthValue {
                title = optional bandwidth value
                description = """optional parameter to update bandwidth
                              """
                type = string
                optional = true
            }

            description {
                title = description
                description = """indicates if its a description update
                              """
                type = boolean
                optional = true
                default = false
            }

            ip {
                title = ip
                description = """indicates if its a ip update
                              """
                type = boolean
                optional = true
                default = false
            }

            serviceStateenable {
                title = description
                description = """indicates if its a serviceState enable
                              """
                type = boolean
                default = false

            }

            serviceStatedisable {
                title = description
                description = """indicates if its a serviceState disable
                              """
                type = boolean
                default = false

            }

            operation {
                title = "Operation from which this CircuitDetailsCollector was invoked"
                description = """
                This property influences the CircuitDetailsCollector's behavior when choosing which
                nodes to configure.
                """
                optional = true
                updatable = false
                type = string
                default = "NETWORK_SERVICE_ACTIVATION"
                enum = [
                    "NETWORK_SERVICE_UPDATE",
                    "NETWORK_SERVICE_DELETION",
                    "NETWORK_SERVICE_ACTIVATION",
                    "CPE_ACTIVATION",
                    "SERVICE_MAPPER"
                ]
            }
        }
    }
}

serviceTemplates {

    NetworkServiceUpdate {
        title = Network Service Update
        description = "Network Service Update"
        implements = charter.resourceTypes.NetworkServiceUpdate

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.networkserviceupdate.networkserviceupdate.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.networkserviceupdate.networkserviceupdate.Terminate"
            }

        }
    }
}
