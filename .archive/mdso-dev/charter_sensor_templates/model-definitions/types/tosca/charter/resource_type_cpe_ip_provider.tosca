"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "CPE IP Provider"
package     = charter
version     = "1.0"
description = """
This document defines the CPE IP Provider. This is the top level service
construct that will be used for communicating with north-bound OSS, WebPortals,
etc...
"""
authors     = [ "David Martino (david.martino@charter.com)", "Thomas Hauser (Thomas.Hauser@charter.com)" ]

imports {

}

resourceTypes {
    cpeIpProvider {
        derivedFrom = tosca.resourceTypes.Root
        title = CPE IP Provider
        description = """
        - This document defines a resource that intakes path details and determines the mgmt IP of a recently installed CPE.
        - This Resource Definition requires the following:
            Target Device
                TID
            Circuit ID

        - Contains overall state of the network service.
        - For service types like ELINE, ELAN, FIA, etc.
        - Contains state and other information about each site in the network service.
        """

        properties {
            target_device {
                title = "Target Device TID"
                description = "TID of Target Device to learn MGMT IP of"
                type = string
                optional = false
                updatable = false
            }
            cid {
                title = "Circuit ID"
                description = "Circuit ID"
                type = string
                optional = false
                updatable = false
            }
            ip {
                title = "CPE IP"
                description = "IP Address of CPE"
                type = string
                optional = true
            }
            ip_provider_error {
                title = "IP Provider Error"
                description = "Error"
                type = string
                optional = true
            }
        }
    }
}

serviceTemplates {
    cpeIpProvider {
        title = CPE IP Provider
        description = "CPE IP Provider"
        implements = charter.resourceTypes.cpeIpProvider

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.cpeIpProvider.cpeIpProvider.Activate"
            }
            terminate {
                type = remote
                language = python
                path = "scripts.cpeIpProvider.cpeIpProvider.Terminate"
            }
        }
    }
}
