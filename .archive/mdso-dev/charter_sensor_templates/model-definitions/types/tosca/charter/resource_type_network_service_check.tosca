"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Service Device Configurator"
package     = charter
version     = "1.0"
description = """
This document defines the the Service Device Configurator action that will do the initial
check of the device to make sure it can support the service provisioning.
"""
authors     = [ "Matt Becker (mbecker@ciena.com)" ]

imports {

}

resourceTypes {
    NetworkServiceCheck {
        derivedFrom = charter.resourceTypes.BaseResource
        title = Network Service Check
        description = """
        - Extended from charter.resourceTypes.BaseResource
        - This resource will do the following:
            1 - Ensure that the enclosed circuit ID is not already provisioned
        """

        properties {

            resource_id {
                title = "Resource ID"
                description = "Resource ID"
                type = string
                updatable = false
                optional = true
            }

            provisioning_stage {
                title = "Provisioning Stage"
                description = """
                Stage of the provisioning:

                PRE: Pre-check before the network service is provisioning
                POST: Post check immediately after provisioning
                IN_SERVICE: In-service check
                """
                type = string
                optional = true
                updatable = false
                default = "POST"
                enum = [
                    "PRE",
                    "POST",
                    "IN_SERVICE"
                ]
            }

            circuit_details_id {
                title = "circuit details id"
                description = "circuit details id"
                type = string
                updatable = true
                optional = true
            } 

        }

        requirements {

        }

        capabilities {

        }

    }
}

serviceTemplates {

    NetworkServiceCheck {
        title = Network Service Check
        description = "Network Service Check"
        implements = charter.resourceTypes.NetworkServiceCheck

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.networkservice.networkservicecheck.Activate"
            }

        }
    }
}
