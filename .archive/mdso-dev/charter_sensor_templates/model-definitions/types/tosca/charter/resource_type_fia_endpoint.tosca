"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "FIA PE Segment"
package     = charter
version     = "1.0"
description = """
This document defines the the FIA PE ENDPOINT.
"""
authors     = [ "Sahil Sidhar (ssidhar@ciena.com)" ]

imports {
         Endpoint = tosca.capabilityTypes.Endpoint

}

resourceTypes {
    FIAendpoint {
        derivedFrom = tosca.resourceTypes.NetworkService
        title = "FIA PE Endpoint"
        description = """
            This resource type represents a FIA endpoint
        """

        properties {

            operation {
                type = string
                title = "Operation"
                description = "operation to be performed"
                optional = true
                default = "ACTIVATE"
            }

            update_property {
                title = "Update Property"
                description = "Properties to be updated, only when the operation is UPDATE"
                type = string
                optional = true
                enum = [
                    "bandwidth",
                    "description",
                    "state_toggle",
                    "ip"
                ]
            }

            pe_device_rid {
                type = string
                title = "PE Device Resource ID"
                description = "PE Device Resource ID"
            }
            network_construct_id {
                type = string
                title = "Network Construct Resource ID"
                description = "Network Construct Resource ID"
            }
            port_name {
                type = string
                title = "Port Name"
                description = "Port Name"
            }
            port_id {
                type = string
                title = "Port Resource ID"
                description = "Port Resource ID"
            }
            port_role {
                type = string
                title = "Port Role"
                description = "Port Role"
            }
            userLabel {
                type = string
                title = "Service Description"
                description = "Service Description"
            }
            interface_userLabel {
                type = string
                title = "Port Description"
                description = "Port Description"
                optional = true
            }
            in_bwProfileFlowParameters {
                type = string
                title = "Ingress Bandwidth Profile Flow Parameters"
                description = "Bandwidth in Mbps"
                optional = true
            }
            e_bwProfileFlowParameters {
                type = string
                title = "Egress Bandwidth Profile Flow Parameters"
                description = "Bandwidth in Mbps"
                optional = true
            }
            vlan {
                type = string
                title = "VLAN"
                description = "VLAN associated with the service"
                optional = true
            }
            type_2 {
                type = boolean
                title = "Type 2"
                description = "Bool confirming whether circuit is Type 2 or not"
                optional = true
            }
            outer_vlan {
                type = string
                title = "Type 2 Outer VLAN"
                description = "Outer VLAN for Type 2 Circuit"
                optional = true
            }
            inner_vlan {
                type = string
                title = "Type 2 Inner VLAN"
                description = "Inner VLAN for Type 2 Circuit"
                optional = true
            }
            unit {
                type = string
                title = "Type 2 Unit"
                description = "Unit for Provisioning Type 2 Service"
                optional = true
            }
            fia_type {
                type = string
                title = "FIA service type"
                description = "FIA service type"
                enum = [
                     "DIRECT",
                     "STATIC",
                     "BGP"
                     ]
            }
            cos {
                type = string
                title = "Cos Name"
                description = "Cos Name"
            }
            apply_group {
                type = string
                title = "Apply Group to be used on physical port"
                description = "Apply Group to be used on physical port"
                optional = true
            }
            lanIpv4Addresses {
                type = array
                title = "Lan IPv4 Addresses"
                description = "LAN IPv4 addresses"
                items.type = string
            }
            lanIpv6Addresses {
                type = array
                title = "Lan IPv6 Addresses"
                description = "LAN IPv6 addresses"
                items.type = string
            }
            wanIpv4Address {
                type = string
                title = "Lan IPv4 Addresses"
                description = "LAN IPv4 addresses"
                optional = true
            }
            wanIpv6Address {
                type = string
                title = "Lan IPv4 Addresses"
                description = "LAN IPv4 addresses"
                optional = true
            }
            nextIpv4Hop {
                type = string
                title = "Next Hop Ipv4 Address"
                description = "Next hop Ipv4 address"
                optional = true
            }
            nextIpv6Hop {
                type = string
                title = "Next Hop Ipv6 Address"
                description = "Next hop Ipv6 address"
                optional = true
            }
            asn {
                type = object
                title = "BGP ASN object"
                description = "BGP ASN object"
                optional = true
                properties {
                    number {
                        type = integer
                        title = "ASN Number"
                        description = "ASN Number"
                    }
                    neighborIpv4Peer {
                        type = string
                        title = "BGP IPv4 Peer"
                        description = "BGP IPv4 Peer"
                        optional = true
                    }
                    neighborIpv6Peer {
                        type = string
                        title = "BGP IPv6 Peer"
                        description = "BGP IPv6 Peer"
                        optional = true
                    }
                    BGPIpv4Prefixes {
                        type = array
                        title = "BGP IPv4 Prefixes"
                        description = "Prefixes to advertise to provider"
                        optional = true
                        items.type = string
                    }
                    BGPIpv6Prefixes {
                        type = array
                        title = "BGP IPv6 Prefixes"
                        description = "Prefixes to advertise to provider"
                        optional = true
                        items.type = string
                    }
                    exportPolicy {
                        type = string
                        title = "BGP Export Policy"
                        description = "BGP Export Policy"
                        optional = true
                    }
                    authenticationBgpKey {
                        type = string
                        title = "BGP auth key"
                        description = "BGP auth key"
                        optional = true
                    }
                }
            }
            firewallFilters {
                type = array
                title = "Firewall Filters"
                description = "Firewall Filters"
                optional = true
                items {
                    type = object
                    properties {
                        name {
                            type = string
                            title = "Firewall Filter Name"
                            description = "Firewall Filter Name"
                            optional = true
                        }
                        direction {
                            type = string
                            title = "Firewall Filter direction"
                            description = "Firewall Filter direction"
                            optional = true
                            enum = [
                                "ingress",
                                "egress"
                                ]
                        }
                        type {
                           type = string
                            title = "Firewall Filter type"
                            description = "Firewall Filter type"
                            optional = true
                            enum = [
                                "ipv4",
                                "ipv6"
                                ]
                        }
                    }
                }
            }
        }

        requirements {
          clientFres {
            type = Endpoint
            resourceTypes = [
              tosca.resourceTypes.FRE
            ]
         }
      }
    }
}