"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Device Onboarder"
package     = charter
version     = "1.0"
description = """
This document defines the resource that can be used for the onboarding of a device into
the Blue Planet system.
"""
authors     = [ "Matt Becker (mbecker@ciena.com)" ]

imports {

}

resourceTypes { 
    DeviceOnboarder {
        derivedFrom = tosca.resourceTypes.Root
        title = Device Onboarder
        description = """
         - This provides a resource that will perform a device on-boarding into BPO.
         - The goal is for it to determine the domain that it should be assigned to
         - and perform any initial configuration if this is a new device.
         """

        properties {
        
            device_ip {
                title = "Device IP"
                description = "The device ip"
                type = string
                optional = false
                updatable = false
            }
            
            device_name {
                title = "Device Name"
                description = "The device name"
                type = string
                optional = true
                updatable = true
            }

            device_model {
                title = "Device Model"
                description = "The device model"
                type = string
                optional = true
                updatable = true
            }

            device_vendor {
                title = "Device Vendor"
                description = "The device vendor"
                type = string
                optional = false
                updatable = true
                default = "RAD"
                enum = [
                    "RAD", 
                    "ADVA",
                    "JUNIPER",
                    "CISCO",
                    "HARMONIC",
                    "NOKIA",
                    "ALCATEL",
                ]
            }
            
            device_already_active {
                title = "Device Active"
                description = "Indicates if the device is already active in the network"
                type = boolean
                default = true
                optional = true
                default = true
            }
            
            session_profile {
                title = "Session Profile"
                description = "The device model of the device that the commands will be done on"
                type = string
                optional = true
                updatable = true
            }

            operation {
                title = "Operation from which this service device onboarder was invoked"
                description = """
                This property influences the DeviceOnboarders's behavior when choosing which
                session to use when onboarding a device.
                """
                optional = true
                updatable = false
                type = string
                default = "NETWORK_SERVICE_ACTIVATION"
                enum = [
                    "NETWORK_SERVICE_UPDATE",
                    "NETWORK_SERVICE_DELETION",
                    "NETWORK_SERVICE_ACTIVATION",
                    "CPE_ACTIVATION",
                    "MANAGED_SERVICES_ACTIVATION",
                    "SMOKE_TEST",
                ]
            }
            
            resource_name {
                title = "Resource Name"
                description = "Resource Name"
                type = string
                optional = true
                updatable = false
            }
    
        }

        requirements {
    
        }
    
        capabilities {
    
        }

    }
}

serviceTemplates {

    DeviceOnboarder {
        title = Device Onboarder
        description = "Device File Onboarder"
        implements = charter.resourceTypes.DeviceOnboarder
        
        plans {

            activate {
                type = remote
                language = python
                path = "scripts.deviceconfiguration.deviceonboarder.DeviceOnboarder"
            }

        }
    }
}
