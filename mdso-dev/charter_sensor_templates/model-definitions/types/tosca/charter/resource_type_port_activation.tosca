"$schema"   = "http://cyaninc.com/json-schemas/tosca-lite-v1/definition-module#"
title       = "Port Activation"
package     = charter
version     = "2.0"
description = """
This document defines a resource that can be used to share configuration properties
across multiple STs.  There will only ever be one of these available that is active
in the system.
"""
authors     = [ "Yeshaswini Narayana(ynarayan@partner.ciena.com)","Sahil Sidhar(ssidhar@ciena.com)", "Pedro Montero (pedro.montero@charter.com)" ]

imports {

}

resourceTypes {
    PortActivation {
        derivedFrom = tosca.resourceTypes.Root
        title = Port Activation
        description = """
         - This document defines a resource that changes the port admin state
         """

        properties {


             portname {
                 title = "Port Name"
                 description = "Port Name"
                 type = string
                 optional = false
                 }

             deviceName {
                 title = "Device Name"
                 description = "FQDN"
                 type = string
                 optional = false
                 }

             vendor {
                    title = "Device Vendor "
                    description = "Vendor name"
                    type = string
                    optional = false
                }

             deviceIP {
                 title = "Device IP"
                 description = "Device IP"
                 type = string
                 optional = true
             }

             terminationTime {
                 title = "Termination time for Port"
                 description = "Termination time for Port"
                 type = integer
                 optional = false
                 updatable = true
                 default = 30
             }

             status {
                 title = "Status from activate plan"
                 description = "Status from activate plan"
                 type = string
                 config = true
                 updatable = true
                 optional = true
                 }

             wasPortActivated {
                 title = "Activation flag"
                 description = "Flag to check wether the port was activated or not"
                 type = boolean
                 optional = true
                 updatable = true
                 }

             deactivate_eligible {
                title = "Deactivate Eligible Flag"
                description = "Flag for eligiblility of deactivation; used to ensure no deactivate button on UI"
                type = boolean
                optional = true
                updatable = true
                }

             deviceResourceID {
                 title = "Device Resource ID"
                 description = "Deviqce Resource ID"
                 type = string
                 output = true
                 }

             portResourceID {
                 title = "Port Resource ID"
                 description = "Port Resource ID"
                 type = string
                 output = true
                 }

             adminState {
                 title = "Admin State of Port"
                 description = "Admin State of Port"
                 type = string
                 output = true
                 }

             operationalState {
                 title = "Operational State of Port"
                 description = "Operational State of Port"
                 type = string
                 output = true
                 }
                 
              portDescription {
                 title = "Port Description"
                 description = "Port Description"
                 type = string
                 output = true
                 optional = true
                 }
             }

        interfaces {

            getPortStatus {
                title = "Get Port Status"
                description = "GET PORT STATUS"
                inputs {}
                outputs {
                    adminstate {
                        title = "Admin State of port"
                        description = "Admin state of port"
                        type = string
                        optional = true
                    }
                    operstate {
                        title = "Operational State of port"
                        description = "Operational state of port"
                        type = string
                        optional = true
                    }
                    status {
                        title = "Status"
                        description = "Status of add device operation"
                        type = string
                    }

                    portRxAvgOpticalPower {
                        title = "Port Receive Average Optical Power level"
                        description = "Port Receive Average Optical Power level"
                        type = string
                        optional = true
                        config = false
                        store = true
                    }

                    portTxAvgOpticalPower {
                        title = "Port Transmit Average Optical Power level"
                        description = "Port Transmit Average Optical Power level"
                        type = string
                        output = true
                        config = false
                        store = true
                    }

                    portSFPvendorPartNumber {
                        title = "Port SFP Vendor Part Number"
                        description = "Port SFP Vendor Part Number"
                        type = string
                        output = true
                        config = false
                        store = true
                    }

                    portSFPvendorName {
                        title = "Port SFP Vendor Name"
                        description = "Port SFP Vendor Name"
                        type = string
                        output = true
                        config = false
                        store = true
                    }

                    portSFPwavelength {
                        title = "Port SFP Wavelength"
                        description = "Port SFP wavelength"
                        type = string
                        output = true
                        config = false
                        store = true
                    }
                }
            }

            setPortStatus {
                title = "Set Port Status"
                description = "SET PORT STATUS"
                inputs {
                    reqdstate {
                        title = "Required Operational State of port"
                        description = "Required Operational state of port"
                        type = string
                    }
                }
                outputs {
                    status {
                        title = "Status"
                        description = "Status of get port status operation"
                        type = string
                    }
                }
            }
        }
    }
}
serviceTemplates {

    PortActivation {
        title = Port Activation
        description = "Port Activation"
        implements = charter.resourceTypes.PortActivation

        plans {

            activate {
                type = remote
                language = python
                path = "scripts.portactivation.portactivation.Activate"
            }

            terminate {
                type = remote
                language = python
                path = "scripts.portactivation.portactivation.Terminate"
            }

            getPortStatus {
                type = remote
                language = python
                path = "scripts.portactivation.portactivation.GetPortStatus"
            }

            setPortStatus {
                type = remote
                language = python
                path = "scripts.portactivation.portactivation.SetPortStatus"
            }
        }
        output {
            status = { getAttr = [activate, status] }
        }

    }
}
