<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="3" skipped="7" tests="40" time="9.745" timestamp="2023-09-26T09:16:40.573578" hostname="Emalees-MBP-2.lan"><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_add_connection_type_to_name" time="0.011" /><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_apply_descriptions_to_interfaces" time="0.035"><failure message="SystemExit: 1">self = &lt;test_bussinesslogic.test_bussiness_logic testMethod=test_apply_descriptions_to_interfaces&gt;

    def test_apply_descriptions_to_interfaces(self):
        """
        test case - Businesslogic apply_descriptions_to_interfaces
        test case to test the apply_descriptions_to_interfaces function/functionality of bussinesslogic.py
        """
        # setting up the database for test case
        resources = {
            "12345": {
                "id": "12345",
                "label": "unit_test_cdc",
                "resourceTypeId": "charter.resourceTypes.CircuitDetailsCollector",
                "productId": "5a7b5782-aace-4170-9e5b-c9a3b5f3b718",
                "properties": {"circuit_id": "51.L1XX.009158..TWCC", "stage": "TEST"},
            }
        }
    
        def resources_get(args):
            """
            function to return values to get calls made during
            the execution of run function
            """
            return resources[args]
    
        # reading required input from files
        # for this test modules json files are present under the path tests/json/test_cdc
    
        with open("resources/tests/jsons/test_business_logic/input_apply_desc_to_interfaces.json") as json_data:
            mulesoft_response = json.load(json_data)
        with open("resources/tests/jsons/test_business_logic/output_apply_desc_to_interfaces.json") as json_data:
            expected_output = json.load(json_data)
    
        # Mocking the required data
        self.common_plan_inst.bpo.resources.get = mock.Mock(side_effect=resources_get)
    
        self.common_plan_inst.logger = mock.Mock()
        self.common_plan_inst.enter_exit_log = mock.Mock()
        CommonPlan.splunk_logger_setup = mock.Mock()
        self.common_plan_inst.run()
        self.business_logic_inst = BusinessLogic(self.common_plan_inst)
        resp = mockfunctions.MockResponse(json_data={}, status_code=301)
        CommonPlan.mget = mock.Mock(return_value=resp)
&gt;       result = self.business_logic_inst.apply_descriptions_to_interfaces(mulesoft_response)

resources/tests/test_bussinesslogic.py:196: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
model-definitions/scripts/networkservice/businesslogic.py:368: in apply_descriptions_to_interfaces
    cli_int_description = self.get_port_description(
model-definitions/scripts/networkservice/businesslogic.py:421: in get_port_description
    new_description_standard_apply = self.description_standard_decision(circuit_details, node)
model-definitions/scripts/networkservice/businesslogic.py:647: in description_standard_decision
    fqdn = self.plan.get_node_fqdn(circuit_details, node)
model-definitions/scripts/common_plan.py:1345: in get_node_fqdn
    self.exit_error(msg)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = &lt;scripts.common_plan.CommonPlan object at 0x7fe0d1ea1fa0&gt;, reason = 'Failed to get node fqdn for node AUSDTXIR3CW in circuit details'

    def exit_error(self, reason=None):
        """called when there is a plan failure
    
        No return. If no reason is provided a generic failure messasge
        will be provided.
    
        :param reason: Reason for the failure
        :type reason: str
        """
    
        if reason is None:
            msg = "Error when running class %s, please check file %s." % (str(self.the_class), self.log_file)
        else:
            msg = "Error in " + str(self.the_class) + ", " + reason + ".  Please check file: " + self.log_file
    
        self.logger.error(msg)
        self.logger.debug(str(traceback.extract_stack()))
        sys.stderr.write(msg)
    
        self.enter_exit_log(msg, "FAILED")
    
&gt;       sys.exit(1)
E       SystemExit: 1

model-definitions/scripts/common_plan.py:430: SystemExit</failure></testcase><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_apply_descriptions_to_service_endpoints" time="0.014"><failure message="AssertionError: assert {'customerNam...07-27'}], ...} == {'customerNam...07-27'}], ...}&#10;  Omitting 6 identical items, use -vv to show&#10;  Differing items:&#10;  {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'pointToPoint', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]} != {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'pointToPoint', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]}&#10;  Use -v to get more diff">self = &lt;test_bussinesslogic.test_bussiness_logic testMethod=test_apply_descriptions_to_service_endpoints&gt;

    def test_apply_descriptions_to_service_endpoints(self):
        """
        test case - Businesslogic apply_descriptions_to_service_endpoints
        test case to test the apply_descriptions_to_service_endpoints function/functionality of bussinesslogic.py
        """
        # setting up the database for test case
        resources = {
            "12345": {
                "id": "12345",
                "label": "unit_test_cdc",
                "resourceTypeId": "charter.resourceTypes.CircuitDetailsCollector",
                "productId": "5a7b5782-aace-4170-9e5b-c9a3b5f3b718",
                "properties": {"circuit_id": "51.L1XX.009158..TWCC", "stage": "TEST"},
            }
        }
    
        def resources_get(args):
            """
            function to return values to get calls made during
            the execution of run function
            """
            return resources[args]
    
        # reading required input from files
        # for this test modules json files are present under the path tests/json/test_cdc
    
        with open("resources/tests/jsons/test_business_logic/input_apply_desc_to_service_endpoints.json") as json_data:
            mulesoft_response = json.load(json_data)
        with open("resources/tests/jsons/test_business_logic/output_apply_desc_to_service_endpoints.json") as json_data:
            expected_output = json.load(json_data)
    
        # Mocking the required data
        self.common_plan_inst.bpo.resources.get = mock.Mock(side_effect=resources_get)
    
        self.common_plan_inst.logger = mock.Mock()
        self.common_plan_inst.enter_exit_log = mock.Mock()
        CommonPlan.splunk_logger_setup = mock.Mock()
        self.common_plan_inst.run()
        self.business_logic_inst = BusinessLogic(self.common_plan_inst)
        values = ["CNI2TXR26AW.DEV.CHTRSE.COM"]
        CommonPlan.get_pe_nodes_from_circuit_details = mock.Mock(return_value=values)
        result = self.business_logic_inst.apply_descriptions_to_service_endpoints(mulesoft_response)
&gt;       assert expected_output == result
E       AssertionError: assert {'customerNam...07-27'}], ...} == {'customerNam...07-27'}], ...}
E         Omitting 6 identical items, use -vv to show
E         Differing items:
E         {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'pointToPoint', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]} != {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'pointToPoint', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]}
E         Use -v to get more diff

resources/tests/test_bussinesslogic.py:241: AssertionError</failure></testcase><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_convert_rad_port_name" time="0.031" /><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_convert_variable_names" time="0.012" /><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_handle_fia_section" time="0.014"><failure message="AssertionError: assert {'customerNam...07-27'}], ...} == {'customerNam...07-27'}], ...}&#10;  Omitting 6 identical items, use -vv to show&#10;  Differing items:&#10;  {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'Point to Point', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]} != {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'Point to Point', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]}&#10;  Use -v to get more diff">self = &lt;test_bussinesslogic.test_bussiness_logic testMethod=test_handle_fia_section&gt;

    def test_handle_fia_section(self):
        """
        test case - Businesslogic handle_fia_section
        test case to test the test_handle_fia_section function/functionality of bussinesslogic.py
        """
        # setting up the database for test case
        resources = {
            "12345": {
                "id": "12345",
                "label": "unit_test_cdc",
                "resourceTypeId": "charter.resourceTypes.CircuitDetailsCollector",
                "productId": "5a7b5782-aace-4170-9e5b-c9a3b5f3b718",
                "properties": {"circuit_id": "51.L1XX.009158..TWCC", "stage": "TEST"},
            }
        }
    
        def resources_get(args):
            """
            function to return values to get calls made during
            the execution of run function
            """
            return resources[args]
    
        # reading required input from files
        # for this test modules json files are present under the path tests/json/test_cdc
    
        with open("resources/tests/jsons/test_business_logic/input_handle_fia_section.json") as json_data:
            mulesoft_response = json.load(json_data)
        with open("resources/tests/jsons/test_business_logic/output_handle_fia_section.json") as json_data:
            expected_output = json.load(json_data)
    
        # Mocking the required data
        self.common_plan_inst.bpo.resources.get = mock.Mock(side_effect=resources_get)
        self.common_plan_inst.logger = mock.Mock()
        self.common_plan_inst.enter_exit_log = mock.Mock()
        CommonPlan.splunk_logger_setup = mock.Mock()
        self.common_plan_inst.run()
        self.business_logic_inst = BusinessLogic(self.common_plan_inst)
    
        result = self.business_logic_inst.handle_fia_section(mulesoft_response)
&gt;       assert expected_output == result
E       AssertionError: assert {'customerNam...07-27'}], ...} == {'customerNam...07-27'}], ...}
E         Omitting 6 identical items, use -vv to show
E         Differing items:
E         {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'Point to Point', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]} != {'service': [{'data': {'evc': [{'adminState': True, 'connectionType': 'Point to Point', 'cosNames': [...], 'endPoints': [...], ...}], 'fia': [{'endPoints': [...], 'type': 'DIRECT'}]}, 'model': 'MEF-LEGATO-EVC', 'version': '2017-07-27'}]}
E         Use -v to get more diff

resources/tests/test_bussinesslogic.py:111: AssertionError</failure></testcase><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_remove_empty_lag_members" time="0.009" /><testcase classname="resources.tests.test_bussinesslogic.test_bussiness_logic" name="test_replace_ports_with_lags_service_endpoints" time="0.018" /><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_cdc_eline" time="0.002"><skipped type="pytest.skip" message="need to fix ERROR">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_cdc.py:31: need to fix ERROR</skipped></testcase><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_cdc_eline_without_parent" time="0.002"><skipped type="pytest.skip" message="need to fix ERROR">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_cdc.py:91: need to fix ERROR</skipped></testcase><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_cdc_fia_PE_AGG" time="0.004"><skipped type="pytest.skip" message="need to fix ERROR">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_cdc.py:227: need to fix ERROR</skipped></testcase><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_cdc_fia_complete" time="0.005"><skipped type="pytest.skip" message="need to fix ERROR">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_cdc.py:290: need to fix ERROR</skipped></testcase><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_cdc_fia_only_PE" time="0.001"><skipped type="pytest.skip" message="errors">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_cdc.py:152: errors</skipped></testcase><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_get_circuit_details_server_response_negative" time="0.016" /><testcase classname="resources.tests.test_cdc.test_circuit_data_collector" name="test_get_circuit_details_server_response_positive" time="0.016" /><testcase classname="resources.tests.test_common.test_common" name="test_is_string_uuid_negative" time="0.013" /><testcase classname="resources.tests.test_common.test_common" name="test_is_string_uuid_positive" time="0.008" /><testcase classname="resources.tests.test_networkservice.test_networkservice" name="test_activatesite" time="0.005" /><testcase classname="resources.tests.test_networkservice.test_networkservice" name="test_resume" time="0.007" /><testcase classname="resources.tests.test_networkservice.test_networkservice" name="test_suspend" time="0.009" /><testcase classname="resources.tests.test_networkservice.test_networkservice" name="test_terminate" time="0.029" /><testcase classname="resources.tests.test_networkservice.test_networkservice" name="test_update" time="0.006" /><testcase classname="resources.tests.test_networkservicecheck.test_network_service_check" name="test_nsc_circuit_id_missing" time="0.065" /><testcase classname="resources.tests.test_networkservicecheck.test_network_service_check" name="test_nsc_mef_service_already_present" time="0.002"><skipped type="pytest.skip" message="is stupid">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_networkservicecheck.py:190: is stupid</skipped></testcase><testcase classname="resources.tests.test_networkservicecheck.test_network_service_check" name="test_nsc_network_service_absent" time="0.013" /><testcase classname="resources.tests.test_networkservicecheck.test_network_service_check" name="test_nsc_network_service_active" time="0.014" /><testcase classname="resources.tests.test_networkservicecheck.test_network_service_check" name="test_nsc_positive_case_post_stage" time="0.013" /><testcase classname="resources.tests.test_networkservicecheck.test_network_service_check" name="test_nsc_positive_case_pre_stage" time="0.012" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_activate" time="0.013" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_activate_device_not_present" time="0.012" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_activate_port_not_present" time="0.010" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_activate_resource_already_exists" time="0.018" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_get_port_status_negative" time="0.010" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_set_port_status" time="0.052" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_set_port_status_already_enabled" time="0.011" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_set_port_status_not_supported" time="0.019" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_terminate" time="0.002"><skipped type="pytest.skip" message="unconditional skip">/Users/emaleekeesler/Documents/GitLab/charter_sensor_templates/resources/tests/test_port_activation.py:508: unconditional skip</skipped></testcase><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_terminate_negative" time="0.009" /><testcase classname="resources.tests.test_port_activation.test_port_activation" name="test_terminate_port_not_present" time="0.009" /><testcase classname="resources.tests.test_update_observed.test_update_observed_property" name="test_update_observed" time="0.010" /></testsuite></testsuites>